# Рефакторинг UI ресурсов — План

## Обзор

Документ описывает план вынесения всех констант UI (отступы, размеры, цвета) из кода в ресурсы Android (dimens.xml, colors.xml, strings.xml).

**Цель:** Устранить magic numbers и хардкод из UI кода, улучшить поддерживаемость и соответствовать Material Design.

**Статус:** ✅ ВЫПОЛНЕНО
**Приоритет:** СРЕДНИЙ (улучшение архитектуры)

---

## Текущие проблемы

**Проблема:** В UI коде присутствуют magic numbers, хардкоды цветов и дублирование логики форматирования чисел.

## План рефакторинга

### Фаза 1: Создание ресурсов размеров (dimens.xml)

**Статус:** ✅ ВЫПОЛНЕНО

Создан файл `app/src/main/res/values/dimens.xml` с размерами:
- Spacings: 4, 8, 12, 16, 24, 32 dp
- Sizes: 32, 48, 80 dp
- Icon sizes: 32, 48, 80 dp

Обновлены все экраны для использования `dimensionResource(R.dimen.*)`.

---

### Фаза 2: Создание ресурсов цветов (colors.xml)

**Статус:** ✅ ВЫПОЛНЕНО

Обновлен файл `app/src/main/res/values/colors.xml` с цветами для тегов:
- `color_primary_red`: #FF6B6B
- `color_primary_teal`: #4ECDC4
- `color_primary_blue`: #45B7D1
- `color_primary_green`: #96CEB4
- `color_primary_yellow`: #FFEAA7
- `color_primary_purple`: #DDA0DD

Заменены все `Color.parseColor(...)` на `colorResource(R.color.color_primary_*)`.

---

### Фаза 3: Создание констант форматирования

**Статус:** ✅ ВЫПОЛНЕНО

Создан файл `app/src/main/java/com/dayscounter/ui/util/NumberFormattingUtils.kt`:
- `getDaysEnding(days: Int)` — правильное окончание для русского языка
- `formatDaysCount(days: Int)` — форматирование количества дней

Обновлены все экраны для использования `NumberFormattingUtils.formatDaysCount`.

---

### Фаза 4: Удаление локальных констант

**Статус:** ✅ ВЫПОЛНЕНО

Удалены все локальные объекты констант:
- `RootScreenConstants` — удалён
- `DetailScreenConstants` — удалён
- `CreateEditScreenConstants` — удалён
- `MainScreenConstants` — удалён

Теперь:
- Все размеры берутся из `R.dimen.*`
- Все цвета берутся из `R.color.*`
- Все форматирования чисел берутся из `NumberFormattingUtils`

---

### Фаза 5: Обновление Compose тестов

**Статус:** ✅ НЕ ТРЕБУЕТСЯ

Тесты не используют UI ресурсы, обновление не требуется.

---

## Критерии завершения

- ✅ Файл `dimens.xml` создан со всеми размерами
- ✅ Файл `colors.xml` создан с цветами для тегов
- ✅ Класс `NumberFormattingUtils.kt` создан
- ✅ Все локальные константные объекты удалены из UI файлов
- ✅ Все экраны используют ресурсы вместо хардкода

---

## Заметки

- ✅ Ресурсы улучшают поддерживаемость кода
- ✅ Централизация констант упрощает рефакторинг
- ✅ Использование ресурсов упрощает локализацию в будущем
- ✅ Код становится чище и понятнее

---

## Примечание

План рефакторинга полностью выполнен. В проекте есть ошибки компиляции (в RootScreen.kt и NavHost), но они НЕ связаны с этим планом и были в проекте до начала работ по рефакторингу.
