# Экран 2.1: Main Screen (Главный экран)

## Обзор

Main Screen является основным экраном приложения для отображения списка всех записей о событиях. Экран предоставляет функциональность поиска, сортировки и управления записями.

## Назначение

Отображение списка всех записей о событиях с возможностью поиска, сортировки и навигации к деталям записи или созданию новой записи.

## Текущее состояние

✅ **Весь функционал реализован и работает корректно (100% завершено)**:

- **Data Layer**: Entity, DAO, Database, Mapper, Repository — полностью реализованы и протестированы
- **Domain Layer**: Repository interface, Domain model — реализованы и протестированы
- **Presentation Layer**:
  - **ViewModel**: MainScreenViewModel реализована с factory методом для DI
  - **UI State**: MainScreenState (Loading, Success, Error) — реализован
  - **UI Components**:
    - ListItemView — компонент карточки записи с поддержкой выделения
    - EmptyState — компонент пустого состояния (4 варианта: empty, search, loading, error)
    - TopAppBar — toolbar с сортировкой
    - SearchField — компонент поиска на базе OutlinedTextField, отображается при наличии 5+ записей или при активном поиске
    - Context Menu — контекстное меню при длинном нажатии (Просмотр, Редактирование, Удаление)
    - Delete Dialog — диалог подтверждения удаления записи
    - LazyColumn — эффективное отображение списка
  - **Integration**: Полная интеграция навигации с DetailScreen и CreateEditScreen
  - **Factory Methods**: Добавлены companion object с factory методами в CreateEditScreenViewModel и DetailScreenViewModel

✅ **Все функции работают корректно**:
- Отображение списка записей
- Поиск по названию и деталям (нечувствительный к регистру)
- Сортировка по дате (возрастание/убывание)
- Удаление записей (через контекстное меню с подтверждением)
- Редактирование записей (через контекстное меню)
- Просмотр деталей записи (через клик или контекстное меню)
- Переход к созданию новой записи (кнопка "+")
- Отображение пустого состояния (4 варианта)
- Выделение выбранного элемента в списке

✅ **Все тесты проходят успешно**:
- Unit-тесты для ViewModel: 10 тестов, все проходят
- Интеграционные тесты: DAO, Database, Repository — все проходят
- Компонентные тесты для UI: DaysCountText — 7 тестов, все проходят
- **Критический баг исправлен**: Краш при открытии экранов CreateEdit и Detail устранен
- ✅ **Качество кода**: ktlintCheck пройден успешно (без ошибок)
- ✅ **Сборка проекта**: выполнена успешно

⚠️ **Осталось (опционально, не требуется для завершения)**:
- Дополнительные UI-тесты для MainScreen для покрытия сценариев взаимодействия пользователя
- Проверка detekt (статический анализ) — опционально

---

## Требования

### Функциональные требования

- [x] Отображение списка всех записей о событиях
- [x] Форматирование количества дней для каждой записи
- [x] Цветовая метка (индикатор цвета) для каждой записи
- [x] Фильтрация записей по поисковому запросу
- [x] Сортировка записей по дате (возрастание/убывание)
- [x] Удаление записей (с диалогом подтверждения)
- [x] Редактирование записей (через контекстное меню)
- [x] Переход к деталям записи (через клик или контекстное меню)
- [x] Переход к созданию новой записи
- [x] Отображение пустого состояния при отсутствии записей
- [x] Контекстное меню при длинном нажатии (Просмотр/Редактирование/Удаление)
- [x] Диалог подтверждения удаления записи
- [x] Выделение выбранного элемента списка
- [x] Проверка линтеров (ktlint) — ✅ пройдено
- [ ] UI-тесты для MainScreen (опционально)
- [ ] Проверка detekt (статический анализ) — опционально

### UI требования

- [x] Список записей в LazyColumn
- [x] Карточка записи с количеством дней и цветовой меткой
- [x] SearchField (OutlinedTextField) для поиска записей — отображается при наличии 5+ записей или при активном поиске
- [x] Кнопка сортировки (возрастание/убывание) — отображается при наличии 2+ записей
- [x] Кнопка добавления новой записи (+)
- [x] Контекстное меню при длинном нажатии (Просмотр/Редактирование/Удаление)
- [x] Диалог подтверждения удаления записи
- [x] Пустое состояние с иконкой, заголовком и описанием
- [x] Выделение выбранного элемента списка
- [x] Соответствие iOS-дизайну (аналогично iOS-версии)

### Архитектурные требования

- [x] MVVM архитектура: ViewModel, State, UI
- [x] Repository pattern для работы с данными
- [x] Flow для реактивного обновления UI
- [x] Dependency Injection через factory методы
- [x] Compose для UI

---

## Зависимости от других этапов

- ✅ **Этап 7**: Модель данных (Entity, Domain model, Room Database, DAO, Repository) — **ЗАВЕРШЕН**, готов к использованию
- ✅ **Этап 6**: Форматирование количества дней — **РЕАЛИЗОВАНО**, используется для отображения количества дней в списке
- ✅ **Экран 1.1**: Root Screen — **ВЫПОЛНЕН**, навигация настроена через RootScreen

---

## План реализации

### Шаг 1: Подготовка слоя данных (Data Layer)

#### 1.1. Модель данных Room Entity
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/data/database/entity/ItemEntity.kt`

#### 1.2. Room DAO
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/data/database/dao/ItemDao.kt`

#### 1.3. Room Database
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/data/database/DaysDatabase.kt`

#### 1.4. Entity Mapper
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/data/database/mapper/ItemMapper.kt`

#### 1.5. Repository Implementation
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/data/repository/ItemRepositoryImpl.kt`

---

### Шаг 2: Подготовка слоя домена (Domain Layer)

#### 2.1. Domain Entity
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:**
- `app/src/main/java/com/dayscounter/domain/model/Item.kt`
- `app/src/main/java/com/dayscounter/domain/model/DisplayOption.kt`
- `app/src/main/java/com/dayscounter/domain/model/SortOrder.kt`
- `app/src/main/java/com/dayscounter/domain/model/ItemExtensions.kt`

#### 2.2. Repository Interface
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/domain/repository/ItemRepository.kt`

#### 2.3. Repository Implementation
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/data/repository/ItemRepositoryImpl.kt`

#### 2.4. SortOrder Enum
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/domain/model/SortOrder.kt`

---

### Шаг 3: Подготовка слоя представления (Presentation Layer)

#### 3.1. UI State
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/viewmodel/MainScreenViewModel.kt`

```kotlin
sealed class MainScreenState {
    data object Loading : MainScreenState()
    data class Success(val items: List<Item>) : MainScreenState()
    data class Error(val message: String) : MainScreenState()
}
```

#### 3.2. ViewModel
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/viewmodel/MainScreenViewModel.kt`

**Функционал:**
- Загрузка элементов из репозитория
- Фильтрация по поисковому запросу (название + детали, нечувствительно к регистру)
- Сортировка по дате (ASCENDING/DESCENDING)
- Удаление элементов (с запросом подтверждения)
- Обновление элементов
- Управление состоянием удаления через showDialog
- Реактивное обновление через Flow
- Factory-метод для создания ViewModel с DI
- Отслеживание общего количества элементов для UI логики

---

### Шаг 4: Реализация UI компонентов

#### 4.1. Компонент карточки записи
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/ui/component/ListItemView.kt`

- `listItemView()` composable с параметрами: `item`, `formattedDaysText`, `onClick`, `onLongClick`, `isSelected`
- Дизайн соответствует iOS-версии
- Поддержка цветовой метки (круглый индикатор 12dp)
- Поддержка длинного нажатия для контекстного меню
- Анимация фона при выделении элемента
- 7 preview-вариантов для разных сценариев

#### 4.2. Компонент пустого состояния
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:**
- `emptyContent()` — для пустого списка
- `emptySearchContent()` — для пустых результатов поиска
- `loadingContent()` — для состояния загрузки
- `errorContent()` — для состояния ошибки

#### 4.3. Toolbar с сортировкой
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `screenHeader()` и `mainScreenTopBar()` в `MainScreen.kt`

- Заголовок "События"
- Кнопка сортировки с выпадающим меню (возрастание/убывание) — отображается при наличии 2+ записей
- Поиск реализован отдельным компонентом SearchField над списком записей
- Сортировка работает корректно через ViewModel

#### 4.4. Главный экран MainScreen
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/ui/screen/MainScreen.kt`

- LazyColumn для отображения списка записей
- SearchField на базе OutlinedTextField для фильтрации записей
- Поиск отображается только при наличии 5+ записей или при активном поиске (чтобы поле не исчезало во время фильтрации)
- SwipeToDismissBox для свайп-действий
- Обработка состояний (Loading, Success, Error)
- Форматирование количества дней через Domain Layer
- Использование factory метода для создания ViewModel

#### 4.5. Контекстное меню для записей
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `contextMenu()` и `listItemWrapper()` в `MainScreen.kt`

- Контекстное меню с тремя опциями:
  - Просмотр (переход к DetailScreen)
  - Редактирование (переход к CreateEditScreen)
  - Удаление (запрос диалога подтверждения)
- Отображается при длинном нажатии на запись
- Визуальное выделение выбранного элемента
- Корректное позиционирование меню относительно элемента списка

#### 4.6. Диалог подтверждения удаления
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `deleteDialog()` в `MainScreen.kt`

- AlertDialog с заголовком и текстом подтверждения
- Кнопка "Удалить" для подтверждения действия
- Кнопка "Отмена" для отмены действия
- Управление состоянием через ViewModel (showDeleteDialog)

#### 4.7. Интеграция с RootScreen
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:** `app/src/main/java/com/dayscounter/ui/screen/components/RootScreenComponents.kt`

- `eventsScreenContent()` — интеграция в NavHost
- Все обработчики корректно передаются в навигацию

---

### Шаг 5: Интеграция с другими экранами

#### 5.1. Интеграция с DetailScreen
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:**
- Маршрут `Screen.ItemDetail` с параметром `itemId` в Screen.kt
- Навигация к DetailScreen при клике на запись
- Factory метод для правильного DI

#### 5.2. Интеграция с CreateEditScreen (создание)
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:**
- Маршрут `Screen.CreateItem` в Screen.kt
- Навигация при нажатии на кнопку "+"
- Factory метод для правильного DI
- Параметр `itemId` устанавливается в `null`

#### 5.3. Интеграция с CreateEditScreen (редактирование)
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:**
- Маршрут `Screen.EditItem` с параметром `itemId` в Screen.kt
- Навигация при свайпе записи влево
- Factory метод для правильного DI
- `itemId` передается через навигацию

#### 5.4. Factory методы для ViewModels
**Статус:** ✅ ВЫПОЛНЕНО

**Реализовано в:**
- `CreateEditScreenViewModel`: companion object с методом `factory(repository, resourceProvider)`
- `DetailScreenViewModel`: companion object с методом `factory(repository)`
- Обновлена навигация в `RootScreenComponents.kt` для использования фабрик

#### 5.5. Локализация
**Примечание:** План локализации готов в документе `Localization_Plan.md`. Все строки определены и готовы к использованию.

---

## Тестирование

**ВАЖНО:** Подробные правила тестирования, включая запрет на интеграционные тесты ViewModels и рабочий подход, см. в `.cursor/rules/testing.mdc`

### Unit-тесты

- Тесты для Entity и Domain model ✅
- Тесты для DAO (in-memory database) ✅
- Тесты для Repository ✅
- Тесты для ViewModel ✅ (реализовано в `app/src/test/java/com/dayscounter/viewmodel/MainScreenViewModelTest.kt` с MockK)

**Детали (10 тестов):**
- Загрузка элементов
- Фильтрация по названию
- Очистка поиска
- Сортировка "Старые первые"
- Сортировка "Новые первые"
- Удаление элементов
- Пустое состояние
- Поиск в деталях
- Нечувствительность к регистру
- Пустой результат поиска

### Компонентные тесты (Compose Testing)

- Тесты для компонента `daysCountText` ✅ (реализовано в `app/src/androidTest/java/com/dayscounter/presentation/ui/component/DaysCountTextTest.kt`)

**Детали (7 тестов):**
- Отображение переданного текста
- Отображение "Сегодня"
- Отображение составного формата
- Отображение сокращенного формата
- Отображение английского текста
- Отображение составного английского формата
- Обработка пустой строки

### Интеграционные тесты

**ВАЖНО:** Только для DAO и Repository, БЕЗ ViewModels (подробности в `.cursor/rules/testing.mdc`)

- Тесты взаимодействия Repository с Room Database ✅
- Тесты взаимодействия ViewModel с Repository ❌ **ЗАПРЕЩЕНО**

### UI-тесты (Espresso)

⚠️ **Статус:** Базовый уровень (компонентные тесты реализованы)

**Реализовано:**
- Компонентные тесты для `daysCountText` (7 тестов)

**Опционально (можно добавить):**
- Тесты для ListItemView
- Тесты для контекстного меню
- Тесты для диалога подтверждения удаления
- Тесты для SearchField
- Интеграционные UI-тесты для MainScreen (без ViewModels)

---

## Критерии завершения этапа

Этап считается завершенным, когда:

- ✅ Все компоненты созданы и работают (100%)
- ✅ Все unit-тесты написаны и проходят (10 тестов для ViewModel с MockK)
- ✅ Все компонентные тесты написаны и проходят (7 тестов для daysCountText)
- ✅ Все интеграционные тесты написаны и проходят (DAO, Repository — без ViewModels)
- ✅ Код соответствует правилам проекта
- ✅ Линтеры (ktlint) — пройдены успешно
- ✅ Поиск и сортировка работают корректно
- ✅ Навигация работает корректно
- ✅ Контекстное меню работает корректно
- ✅ Диалог подтверждения удаления работает корректно

**Примечание:** Интеграционные тесты ViewModels не создаются из-за фундаментальной архитектурной проблемы (подробности в `.cursor/rules/testing.mdc`). ViewModel тестируется через unit-тесты с MockK.

**Статус:** ✅ ВЫПОЛНЕНО (100%)

---

## Примечания

1. **Совместимость с iOS**: Верстка элемента списка должна быть похожа на iOS-версию для единообразия пользовательского опыта.

2. **Производительность**: Использовать LazyColumn для эффективного отображения больших списков.

3. **Реактивность**: Использовать Flow для автоматического обновления UI при изменении данных.

4. **Тестирование**: Все компоненты должны быть покрыты тестами перед использованием в других этапах.

5. **Зависимости**: ✅ Этап 7 (Модель данных) завершен и готов к использованию. ✅ Этап 6 (Форматирование дней) реализован и используется.

6. **Поиск**: Фильтрация реализована на уровне ViewModel через объединение Flow. ✅ UI реализован как SearchField на базе OutlinedTextField, отображается при наличии 5+ записей или при активном поиске.

7. **Сортировка**: Реализована через enum SortOrder. ✅ РЕАЛИЗОВАНО.

8. **Свайп-действия**: Реализованы через SwipeToDismissBox. ✅ РЕАЛИЗОВАНО.

9. **Factory методы**: Для CreateEditScreenViewModel и DetailScreenViewModel добавлены companion object с factory методами. ✅ ИСПРАВЛЕНО.

---

## Блокируемые этапы

После завершения этого экрана можно приступать к:

- ✅ Экран 3.1: Item Screen (требует навигацию из Main Screen) — уже реализован и интегрирован
- ✅ Экран 4.1: Create/Edit Item Screen (требует навигацию из Main Screen) — уже реализован и интегрирован

**Примечание**: Экраны 3.1 и 4.1 полностью реализованы и интегрированы с Main Screen. Навигация работает корректно.

---

## Текущие проблемы

### ✅ Исправлено: Краш при открытии экранов CreateEdit и Detail

**Описание:** При нажатии на кнопку "+" или попытке открыть детали записи происходил краш приложения.

**Причина:** ViewModels создавались без фабрики, но имели параметры в конструкторе.

**Решение:** Добавлены companion object с factory методами в ViewModels, обновлена навигация.

**Статус:** ✅ ИСПРАВЛЕНО

### ✅ Исправлено: Переделка компонента поиска (2026-01-02)

**Важность:** СРЕДНЯЯ

**Что сделано:**
- Устранено предупреждение о deprecated `SearchBar`, реализован `SearchField` на базе `OutlinedTextField`
- Поле поиска постоянно отображается над списком, условно: при 5+ записях или при активном поиске
- Упрощен код: удалены `isSearchActive`, кнопка поиска из TopAppBar, компонент `searchResultItem()`
- Корректная работа с paddingValues

**Статус:** ✅ ВЫПОЛНЕНО

### ✅ Реализовано: Контекстное меню для записей (2026-01-02)

**Важность:** СРЕДНЯЯ

**Что сделано:**
- Реализован механизм контекстного меню при длинном нажатии на запись
- Добавлены три опции меню: Просмотр, Редактирование, Удаление
- Реализован диалог подтверждения удаления записи
- Добавлено визуальное выделение выбранного элемента списка
- Корректное позиционирование меню относительно элемента списка

**Статус:** ✅ ВЫПОЛНЕНО

### ✅ Проверено: Качество кода (2026-01-02)

**Важность:** ВЫСОКАЯ

**Что проверено:**
- ✅ ktlintCheck — пройден успешно (без ошибок и предупреждений)
- ✅ Все unit-тесты (10 тестов для ViewModel) — пройдены
- ✅ Все компонентные тесты (7 тестов для daysCountText) — пройдены
- ✅ Интеграционные тесты — пройдены
- ✅ Сборка проекта — выполнена успешно

**Статус:** ✅ ВЫПОЛНЕНО

### Остальные задачи (опционально)

⚠️ Дополнительные UI-тесты для MainScreen (опционально):
- Тесты для ListItemView
- Тесты для контекстного меню
- Тесты для диалога подтверждения удаления
- Тесты для SearchField
- Интеграционные UI-тесты для MainScreen

⚠️ Проверка detekt (статический анализ) — опционально

---

## Обновленный план завершения Main Screen

### Приоритет 0: ✅ ВЫПОЛНЕНО - Исправление краша при открытии экранов CreateEdit и Detail

**Важность:** КРИТИЧЕСКАЯ

**Статус:** ✅ ИСПРАВЛЕНО

**Что сделано:**
- Добавлены companion object с factory методами в ViewModels
- Обновлена навигация в RootScreenComponents.kt для использования фабрик
- Сборка и тесты проходят успешно

**Результат:** При нажатии на "+" или открытии деталей записи приложение не крашится.

---

### Приоритет 1: ✅ ВЫПОЛНЕНО - Исправление критических ошибок сборки

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- Исправлена версия Gradle (AGP 8.13.2 → Gradle 9.2.1)
- Добавлена зависимость `material-icons-extended`
- Реализована функция `itemsListContent()`

---

### Приоритет 2: ✅ ВЫПОЛНЕНО - Реализация функциональности поиска

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- Реализован компонент `SearchBar` в MainScreen.kt
- Добавлена фильтрация по поисковому запросу в MainScreenViewModel
- Фильтрация выполняется по названию и деталям (нечувствительно к регистру)
- Использован Combine Flow для объединения потока элементов и поискового запроса

---

### Приоритет 3: ✅ ВЫПОЛНЕНО - Полная интеграция навигации

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- Интеграция с DetailScreen, CreateEditScreen (создание), CreateEditScreen (редактирование)
- Добавлены маршруты в Screen.kt, реализована навигация в RootScreenComponents.kt
- Factory методы для ViewModels

---

### Приоритет 4: ✅ ВЫПОЛНЕНО - Unit-тесты для ViewModel

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- Создан файл `MainScreenViewModelTest.kt`
- Реализовано 10 unit-тестов
- Использован FakeItemRepository

---

### Приоритет 4.5: ✅ ВЫПОЛНЕНО - Реализация контекстного меню

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- Реализован компонент `contextMenu()` с тремя опциями (Просмотр, Редактирование, Удаление)
- Реализован компонент `listItemWrapper()` с поддержкой длинного нажатия
- Реализован компонент `deleteDialog()` для подтверждения удаления
- Добавлено визуальное выделение выбранного элемента
- ViewModel обновлена для поддержки диалога удаления (showDeleteDialog)

---

### Приоритет 5: ✅ ВЫПОЛНЕНО - Компонентные тесты для UI

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- Создан файл `DaysCountTextTest.kt`
- Реализовано 7 компонентных тестов для `daysCountText`
- Использован Compose Testing API

---

### Приоритет 6: ✅ ВЫПОЛНЕНО - Проверка качества кода

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- ✅ ktlintCheck пройден успешно (без ошибок)
- ✅ Все unit-тесты (10 тестов для ViewModel) — пройдены
- ✅ Все компонентные тесты (7 тестов для daysCountText) — пройдены
- ✅ Интеграционные тесты — пройдены
- ✅ Сборка проекта — выполнена успешно

---

### Приоритет 7: Дополнительные UI-тесты (опционально)

#### Шаг 5.1: Запуск линтеров

**Статус:** ✅ ВЫПОЛНЕНО

**Что сделано:**
- Запущен `./gradlew ktlintCheck` — ✅ пройден без ошибок
- ✅ Код соответствует стандартам форматирования
- ✅ Все тесты проходят успешно

**Примечание:** detekt — опционально, можно выполнить при необходимости

---

## Обновленная документация

В план были внесены следующие изменения для актуализации:

1. Добавлен раздел "Текущие проблемы" с описанием критического бага и его решения
2. Добавлен раздел "Приоритет 0" для исправления критического бага
3. Обновлен раздел "Текущее состояние" с информацией о реализации factory методов и SearchField
4. Обновлены разделы "Шаг 1-5" с отметками о выполнении
5. Добавлена документация о том, что критический баг исправлен
6. Обновлен раздел "UI Components" с описанием SearchField
7. Добавлена документация о переделке компонента поиска
8. Обновлен раздел "Приоритет 2.5" с информацией о выполнении переделки поиска
9. Обновлены критерии завершения этапа с учетом исправления бага и переделки поиска
10. Обновлены требования к UI с описанием условного отображения поля поиска

---

## Полезные ссылки

- [Этап 7: Модель данных](./Stage_7_Data_Model_Implementation_Plan.md)
- [Этап 6: Форматирование дней](./Stage_6_Days_Formatting_Implementation_Plan.md)
- [План локализации](./Localization_Plan.md)
- [Экран 1.1: Root Screen](./Screen_1.1_Root_Screen.md)
- [Экран 3.1: Item Screen](./Screen_3.1_Item_Screen.md)
- [Экран 4.1: Create/Edit Item Screen](./Screen_4.1_Create_Edit_Item_Screen.md)

---

## История изменений

- 2025-01-01: Первоначальный план создания Main Screen
- 2025-01-02: Добавление factory методов для исправления критического бага
- 2025-01-02: Обновление навигации для использования фабрик
- 2025-01-02: Актуализация документации (97% выполнено)
- 2026-01-01: Обновление документации - экран полностью реализован
- 2026-01-02: Переделка компонента поиска (удаление deprecated API, улучшение UX)
- 2026-01-02: Добавление условного отображения поля поиска (5+ записей ИЛИ активный поиск)
- 2026-01-02: Исправление бага с исчезновением поля поиска при фильтрации
- 2026-01-02: Актуализация документации SearchField в Screen_2.1_Main_Screen.md
- 2026-01-02: Удаление документа Screen_2.2_Search_Refactor_Plan.md (переделка завершена)
- 2026-01-02: Сжатие описания выполненных пунктов (удаление дублирования и сокращение)
- 2026-01-02: Реализация контекстного меню для записей (Просмотр/Редактирование/Удаление)
- 2026-01-02: Реализация диалога подтверждения удаления записи
- 2026-01-02: Добавление визуального выделения выбранного элемента списка
- 2026-01-02: Добавление компонентных тестов для daysCountText (7 тестов)
- 2026-01-02: Проверка качества кода через ktlintCheck — успешно
- 2026-01-02: Обновление документации — Main Screen полностью завершен (100%)
- 2026-01-02: Актуализация критериев завершения этапа и текущих проблем
- 2026-01-11: Актуализация плана - весь функционал реализован (100%)