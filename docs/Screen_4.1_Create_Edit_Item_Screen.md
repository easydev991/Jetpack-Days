# Экран 4.1: Create/Edit Item Screen (Создание и редактирование записей)

## Назначение
Создание новой записи или редактирование существующей

## Компоненты
1. **Заголовок экрана**
   - Для создания: "Новая запись"
   - Для редактирования: "Редактировать"
2. **Поле ввода "Название"**
   - Заголовок: "Название"
   - Placeholder: "Название для записи"
   - Обязательное поле
   - Автофокус при открытии экрана
3. **Поле ввода "Описание"**
   - Заголовок: "Описание"
   - Placeholder: "Описание для записи"
   - Многострочное текстовое поле
   - Необязательное поле
4. **Выбор даты**
   - Заголовок: "Дата события"
   - DatePicker с выбором даты (и времени, если нужно)
   - По умолчанию: текущая дата
5. **Цветовая метка**
   - Toggle: "Добавить цветовую метку"
   - При включении — показывается ColorPicker
   - При выключении — скрывается ColorPicker
   - По умолчанию: выключено
6. **Опция отображения дней**
   - Заголовок: "Формат отображения"
   - Опции (Single Choice):
      - "Только дни"
      - "Дни и месяцы"
      - "Годы, месяцы и дни"
   - По умолчанию: "Только дни"

## Кнопки на Toolbar
- **Кнопка "Отмена" / "Закрыть"**
   - Для создания: "Закрыть" (возвращает к списку)
   - Для редактирования: "Отмена" (возвращает к просмотру записи)
   - Позиция: слева
- **Кнопка "Сохранить"**
   - Позиция: справа
   - Активна только если название не пустое и при редактировании
     есть изменения

## Валидация
- Название не может быть пустым
- При редактировании кнопка "Сохранить" активна только если данные изменились

## Навигация
- Кнопка "Отмена/Закрыть" → возврат к предыдущему экрану
- Кнопка "Сохранить" → сохранение данных и возврат к предыдущему экрану

## Реализация
- Создать форму с полями ввода для всех необходимых данных
- Реализовать DatePicker для выбора даты события
- Добавить ColorPicker с возможностью включения/отключения через Toggle
- Реализовать выбор опции отображения дней
- Добавить валидацию полей (обязательное поле "Название")
- Реализовать логику сохранения данных
- Обеспечить разные состояния экрана для создания и редактирования
- Подключить к ViewModel для управления состоянием и сохранения данных
- Использовать современные компоненты Material Design 3
- Применить тему приложения с поддержкой темного режима
- Применить корректные иконки из Material Icons
- Использовать Room для локального хранения данных
- Реализовать Repository Pattern для абстракции источников данных
- Использовать Coroutines для асинхронных операций
- Реализовать обработку ошибок и состояний загрузки

## Тестирование
- Проверить валидацию поля "Название"
- Проверить функциональность DatePicker
- Проверить включение/отключение ColorPicker через Toggle
- Проверить выбор опции отображения дней
- Проверить активацию кнопки "Сохранить" только при наличии изменений (при редактировании)
- Проверить корректное сохранение данных
- Проверить корректное отображение экрана в режиме создания и редактирования